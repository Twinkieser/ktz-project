# Система диспетчеризации локомотивов КТЖ

Полноценная веб-система для автоматизации управления движением локомотивов.

## MVP: Импорт и График (Гант)
В текущей версии реализован MVP для КТЖ:
- **Импорт данных**: Поддержка загрузки файлов .xlsx (Excel) и .csv.
- **Автоматический маппинг**: Система распознает заголовки на русском и английском языках.
- **Автоматическая валидация**: Система проверяет формат дат и существование объектов (автоматически создает станции и локомотивы при их отсутствии).
- **Контроль конфликтов**: При импорте автоматически выявляются пересечения графиков работы локомотивов по формуле: `existing.start < new.end AND existing.end > new.start`.
- **График Ганта**: Визуализация занятости парка на интерактивной временной шкале с подсветкой конфликтов красным цветом.

### Формат XLSX для импорта
Файл должен содержать лист "Assignments" (или данные на первом листе).
Поддерживаемые колонки (RU/EN):
- `locomotive_number` / `Локомотив`
- `train_number` / `Поезд`
- `from_station` / `От`
- `to_station` / `До`
- `start_time` / `Начало`
- `end_time` / `Конец`
- `note` / `Примечание` (опционально)

### Как запустить
1. `npm install`
2. `npm run dev`
3. Перейдите на страницу "Импорт данных" и загрузите файл из папки `/samples/assignments_demo.xlsx`.
4. Проверьте результат на странице "График оборота" и "Конфликты".

### Примеры файлов
- `/samples/assignments_template.xlsx` — пустой шаблон.
- `/samples/assignments_demo.xlsx` — демонстрационные данные с намеренными конфликтами.

## Технологический стек
- **Frontend**: React, TypeScript, Tailwind CSS, Lucide Icons, Motion.
- **Backend**: Node.js, Express.
- **Database**: SQLite (better-sqlite3).

## Запуск системы
1. Установите зависимости: `npm install`
2. Запустите в режиме разработки: `npm run dev`
3. Откройте `http://localhost:3000`

## Роли
- **Диспетчер**: Полный доступ к планированию и мониторингу.
- **Администратор**: Управление справочниками (в разработке).
- **Просмотр**: Только чтение дашбордов.

## Тестовые данные
Система автоматически инициализирует базу данных `loco_dispatcher.db` при первом запуске с демонстрационными данными (станции Астана, Алматы, Караганда; поезда 001X, 641A и др.).
